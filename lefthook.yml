$schema: 'https://raw.githubusercontent.com/evilmartians/lefthook/master/schema.json'
# commit-msg:
#   commands:
#     lint:
#       run: go-gitlint --msg-file={1}

pre-commit:
  parallel: true
  commands:
    lint:
      root: "."
      glob: "*.go"
      run: GOEXPERIMENT=jsonv2 golangci-lint run --fix
      stage_fixed: true
    test:
      root: "."
      glob: "*.go"
      run: GOEXPERIMENT=jsonv2 go test -v ./...
